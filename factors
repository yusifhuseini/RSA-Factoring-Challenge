#!/usr/bin/env bash

# Function to calculate the product of factors
product_of_factors() {
    local num=$1
    local p=$2
    local q=1

    for ((i = 2; i <= num; i++)); do
        while ((num % i == 0)); do
            num=$((num / i))
            q=$((q * i))
        done
    done

    if ((q > p)); then
        tmp=$p
        p=$q
        q=$tmp
    fi

    echo "$1:$p*$q"
}

# Function to parse and process a line
factorize() {
    local n
    local p
    local q

    IFS=':' read -r n p <<< "$1"

    product_of_factors "$n" "$p"
}

# Check if the correct number of arguments is provided
if [ $# -ne 1 ]; then
    echo 'Usage: factors <file>'
    exit 1
fi

# Process the input file
while read line; do
    factorize "$line"
done < "$1"
